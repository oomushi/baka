<h1>Listing users</h1>

<table>
  <tr>
    <th>Username</th>
    <th>Email</th>
    <th>Location</th>
    <th>Created at</th>
    <th>Messages</th>
    <th>Website</th>
    <th></th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%= link_to user.username,user %></td>
    <td><%= mail_to user.email,"&thinsp;".html_safe, {:title=> user.email,:class=>"button email"} unless user.email.nil? %></td>
    <td><%= user.location %></td>
    <td><%= l user.created_at,:format=>:long %></td>
    <td><%= user.messages.count %></td>
    <td><%= link_to "&thinsp;".html_safe, user.website, {:target=>"_blank",:title=> 'website',:class=>"button web"} unless user.website.nil? %></td>    
    <td><%= link_to "&thinsp;".html_safe, edit_user_path(user),title: t(:edit),class: "button edit" if @current_user.can_update? user %>
      <%= link_to "&thinsp;".html_safe, user, confirm: t(:destroy_confirm), method: :delete,title: t(:destroy), class: "button del" if @current_user.can_destroy? user %></td>
  </tr>
<% end %>
</table>

<br />
<%= paginate @users %>
